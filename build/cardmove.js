"use strict";(function(e,t,n){var a=t.documentElement.getBoundingClientRect().height,r=a/5,i=1,s=-1,o=5;var l=t.createElement("div");var c=["webkit","moz","o","ms"];function u(e,t){return this instanceof u?this.init(e,t):new u(e,t)}u.prototype.init=function(e,n){var r=this;r.element=e;if(typeof e==="string"){r.element=t.querySelector(e)}if(!r.element){throw new Error("element not found")}var i=r.element.children;if(i.length<2){throw new Error("At least 2 frames required!")}p(r.element.style,"height",a+"px");r.pages=Array.prototype.slice.call(i,0);r.pages.forEach(function(e){p(e.style,"height",a+"px")});r.prePage=null;r.currentPage=r.pages[0];r.nextPage=r.pages[1];r.clientHeight=a;g(r.element,"touchstart",r,false);return r};u.prototype.handleEvent=function(e){var t=this;switch(e.type){case"touchstart":t._start(e);break;case"touchmove":t._move(e);break;case"touchend":t._end(e);break;case"touchcancel":t._cancel(e);break;case"webkitTransitionEnd":t._transitionEnd(e);break}};u.prototype._start=function(e){var t=this;g(t.element,"touchmove",t,false);g(t.element,"touchend",t,false);g(t.element,"webkitTransitionEnd",t,false);var n=e.target.tagName;if(n!=="A"&&n!=="SELECT"&&n!=="INPUT"&&n!=="TEXTAREA"&&n!=="BUTTON"){e.preventDefault()}t.startPageX=m(e,"pageX");t.startPageY=m(e,"pageY");t.startTime=e.timeStamp;t.moving=false;t.transition=false};u.prototype._move=function(e){var t=this;var n=m(e,"pageX");var a=m(e,"pageY");var r=f(t.startPageY,a);if(r===0){return}if(r===s&&t.nextPage){if(!t.moving){t.moving=true;p(t.nextPage.style,{transitionDuration:"0ms","-webkit-transform":"translate3d(0, "+t.clientHeight+"px, 0)"});$(t.nextPage).addClass("active").removeClass("f-hide")}else{p(t.currentPage.style,{transitionDuration:"0ms","-webkit-transform":"translate3d(0, -"+Math.min(t.clientHeight,Math.abs(t.startPageY-a)/10)+"px, 0) scale("+(1-Math.abs(t.startPageY-a)/t.clientHeight*.2)+")"});p(t.nextPage.style,{transitionDuration:"0ms","-webkit-transform":"translate3d(0, "+(t.clientHeight-Math.abs(t.startPageY-a))+"px, 0)"})}}else if(r===i&&t.prePage){if(!t.moving){t.moving=true;p(t.prePage.style,{transitionDuration:"0ms",webkitTransform:"translate3d(0, -"+t.clientHeight+"px, 0)"});$(t.prePage).addClass("active").removeClass("f-hide")}else{p(t.currentPage.style,{transitionDuration:"0ms",webkitTransform:"translate3d(0, "+Math.abs(t.startPageY-a)/10+"px, 0) scale("+(1-Math.abs(t.startPageY-a)/t.clientHeight*.2)+")"});p(t.prePage.style,{transitionDuration:"0ms",webkitTransform:"translate3d(0, "+(Math.abs(t.startPageY-a)-t.clientHeight)+"px, 0)"})}}else{h(t.element,"touchend",t,false)}};u.prototype._end=function(e){var t=this,n=m(e,"pageY"),a;h(t.element,"touchmove",t,false);h(t.element,"touchend",t,false);var r=f(t.startPageY,n);t.direction=r;t.transition=true;if(r===s){p(t.nextPage.style,{transitionDuration:"350ms","-webkit-transform":"translate3d(0, 0, 0)"})}if(r===i){p(t.prePage.style,{transitionDuration:"350ms","-webkit-transform":"translate3d(0, 0, 0)"})}};u.prototype._cancel=function(e){var n=this;h(t,"touchstart",n,false);h(t,"webkitTransitionEnd",n,false)};u.prototype._transitionEnd=function(e){var n=this;if(!n.transition)return;h(t,"webkitTransitionEnd",n,false);$(n.currentPage).addClass("f-hide");if(n.direction===s){$(n.nextPage).removeClass("active");n.prePage=n.currentPage;n.currentPage=n.nextPage;n.nextPage=null}else if(n.direction===i){$(n.prePage).removeClass("active");n.nextPage=n.currentPage;n.currentPage=n.prePage;n.prePage=null}n.transition=false;n._triggerEvent("cdTransitionEnd",true,false,{currentPage:n.currentPage})};u.prototype._triggerEvent=function(e,n,a,r){var i=this;var s=t.createEvent("Event");s.initEvent(e,n,a);if(r){for(var o in r){if(r.hasOwnProperty(o)){s[o]=r[o]}}}return i.element.dispatchEvent(s)};u.prototype._cancel=function(e){var n=this;h(t,"touchstart",n,false);h(t,"webkitTransitionEnd",n,false)};function f(e,t){if(Math.abs(e-t)<o)return 0;return e>t?s:i}function g(e,t,n,a){e.addEventListener(t,n,!!a)}function h(e,t,n,a){e.removeEventListener(t,n,!!a)}function m(e,t){return e.changedTouches?e.changedTouches[0][t]:e[t]}function p(e,t,a){if(typeof t==="string"&&e[t]!==n){e[t]=a}if(typeof t==="object"){for(var r in t){p(e,r,t[r])}}}function v(e){if(l.style[e]!==n){return e}else{var t;P(c,function(a){var r=a+d(e);if(l.style[r]!==n){t="-"+a+"-"+e;return true}});return t}}function d(e){return e.charAt(0).toUpperCase()+e.substr(1)}function P(e,t){for(var n=0,a=e.length;n<a;n++){if(t(e[n],n)){return true}}return false}e.CardMove=u})(window,window.document);